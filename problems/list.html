<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>문제 목록 - NetLab</title>
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="../assets/css/list.css">
  <script src="../PUBLIC/JS/navbar.js"></script>
</head>
<body>
  <!-- navbar.js가 관리 -->
  <div class="navbar">
    <a href="/index.html" class="brand">NetLab</a>
    <div class="nav-right">
      <div id="nav-links"></div>
      <div class="user-info" id="user-info"></div>
    </div>
  </div>

  <div class="container">
    <h1>문제 목록</h1>
    <ul id="problemList"></ul>
  </div>

  <script>
    // ---- 문제 목록 ----
    $.ajax({
      url: 'https://be.netlab.kr/api/submit/problems',
      method: 'GET',
      success: function (res) {
        const $list = $('#problemList').empty();
        res.forEach(p => {
          const $li = $('<li class="problem-item">').attr('data-id', p.id);
          $li.append($('<div class="title-line">')
            .append($('<strong>').text(`ID: ${p.id} - ${p.title}`))
            .append($('<span class="pill">').text(p.difficulty)));
          if (p.description) $li.append($('<div class="description">').text(p.description));
          $li.append($('<div class="tags">').text(`태그: ${p.tags}`));
          $list.append($li);
        });
      },
      error: function () { alert('문제 목록을 불러오지 못했습니다.'); }
    });

    // ---- 클릭 이동 ----
    $(document).on('click', '.problem-item', function () {
      const id = $(this).data('id');
      if (!confirm('문제를 풀러 가시겠습니까?')) return;
      window.open(`/views/index.html?id=${encodeURIComponent(id)}`, '_blank', 'noopener,noreferrer');
    });
  </script>
</body>
</html>
